{{- $img := .Get "img" | default "" -}}
{{- $rev := .Get "rev" | default "false" -}}
{{- $alt := .Get "alt" | default "" -}}
{{- $cap := .Get "cap" | default "" -}}

<section class="project-section{{ if eq $rev "true" }} reverse{{ end }}">
  <div class="project-section-text">
    {{ .Inner | markdownify }}
  </div>

  {{ with $img }}
    {{ with $.Page.Resources.GetMatch . }}
      <div class="project-section-image">
        <figure>
          <img src="{{ .RelPermalink }}" alt="{{ $alt }}">
          {{ with $cap }}
            <figcaption class="project-section-caption">{{ . }}</figcaption>
          {{ end }}
        </figure>
      </div>
    {{ end }}
  {{ end }}
</section>
